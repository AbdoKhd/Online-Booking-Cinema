<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <style>
        .bd-placeholder-img {
          font-size: 1.125rem;
          text-anchor: middle;
          -webkit-user-select: none;
          -moz-user-select: none;
          user-select: none;
        }
  
        @media (min-width: 768px) {
          .bd-placeholder-img-lg {
            font-size: 3.5rem;
          }
        }
  
        .b-example-divider {
          height: 3rem;
          background-color: rgba(0, 0, 0, .1);
          border: solid rgba(0, 0, 0, .15);
          border-width: 1px 0;
          box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
        }
  
        .b-example-vr {
          flex-shrink: 0;
          width: 1.5rem;
          height: 100vh;
        }
  
        .bi {
          vertical-align: -.125em;
          fill: currentColor;
        }
  
        .nav-scroller {
          position: relative;
          z-index: 2;
          height: 2.75rem;
          overflow-y: hidden;
        }
  
        .nav-scroller .nav {
          display: flex;
          flex-wrap: nowrap;
          padding-bottom: 1rem;
          margin-top: -1px;
          overflow-x: auto;
          text-align: center;
          white-space: nowrap;
          -webkit-overflow-scrolling: touch;
        }

        .container {
            max-width: 960px;
        }

        h1, h2, h3, h4, h5, label, span, p {
            color: white;
        }
      </style>
</head>

<body>
    <header class="p-3 " style="background-color: rgb(15, 15, 15)">
        <div class="container" >
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
              <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"/></svg>
            </a>
    
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
              <% if(user !== undefined){ %>
                <li><a href="/home/home?username=<%=user%>" class="nav-link px-1 text-white" style="font-size: 1.5rem;">OBC&nbsp&nbsp&nbsp</a></li>  
                <li><a href="/home/home?username=<%=user%>" class="nav-link px-2 text-white">Home</a></li>
                <li><a href="/movies/movies?username=<%=user%>" class="nav-link px-2 text-white">Movies</a></li>
              <% } else { %>
                <li><a href="/home/home" class="nav-link px-1 text-white" style="font-size: 1.5rem;">OBC&nbsp&nbsp&nbsp</a></li>  
                <li><a href="/home/home" class="nav-link px-2 text-white">Home</a></li>
                <li><a href="/movies/movies" class="nav-link px-2 text-white">Movies</a></li>
              <% } %>
              
              <li><a class="nav-link px-2 text-white">Ways To Watch</a></li>
            </ul>
    
            <form action="/movies/search" class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
              <input type="hidden" id="username" name="username" value="<%=user%>">
              <input type="search" name="search" class="form-control form-control-dark text-bg-dark" placeholder="Search..." aria-label="Search">
            </form>
    
            
            <div class="text-end">
      
                <% if(user !== undefined){ %>
                  <span style="color: white;">Welcome <%= user %></span>
                <% } else { %>
                  <form action="/login/login" style="display: inline;">
                    <button type="submit" class="btn btn-outline-light me-2">Login</button> 
                  </form>
                  <form action="/signUp/signUp" style="display: inline;">
                     <button type="submit" class="btn btn-warning" >Sign-up</button>
                  </form>
                <% } %>
                
                
            </div>
          </div>
        </div>
      </header>

      <div class="container">
        <main>
          <div class="py-5 text-center">
            <h2>Checkout</h2>
          </div>
      
          <div class="row g-5">
            <div class="col-md-7 col-lg-8">
              <h4 class="mb-3">Reservation</h4>
              <form action="/home/home">
                <div class="row g-3">
                    <div class="col-md-5">
                        <label for="tickets" class="form-label">Tickets</label>
                        <select onchange="ticketsChanged()" class="form-select" id="tickets" style="width:80px;" required>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                          <option value="7">7</option>
                          <option value="8">8</option>
                          <option value="9">9</option>
                        </select>
                    </div>
                </div>
      
                <hr class="my-4">
      
                <hr class="my-4">
      
                <h4 class="mb-3">Payment</h4>
      
                <div class="my-3">
                  <div class="form-check">
                    <input id="credit" name="paymentMethod" type="radio" class="form-check-input" checked required>
                    <label class="form-check-label" for="credit">Cash at the register</label>
                  </div>
                  <span>(More options coming soon!)</span>
                </div>
      
                <hr class="my-4">
      
                <!-- <button class="w-100 btn btn-primary btn-lg" type="submit">Book Now</button> -->
              </form>
            </div>
            <div class="col-md-5 col-lg-4 order-md-last">
                <h4 class="d-flex justify-content-between align-items-center mb-3">
                  <span class="text-primary">Your cart</span>
                  <span class="badge bg-primary rounded-pill">1</span>
                </h4>
                <ul class="list-group mb-3">
                  <li class="list-group-item d-flex justify-content-between lh-sm">
                    <div>
                      <h6 class="my-0"><%=movie.name%></h6>
                      <small class="text-muted" id="ticket-text">X Tickets</small>
                    </div>
                    <span class="text-muted" id="ticket-price">$12</span>
                  </li>
                  <li class="list-group-item d-flex justify-content-between">
                    <span class="text-muted">Total (USD)</span>
                    <strong id="total-price">$20</strong>
                  </li>
                </ul>
              </div>
          </div>
        </main>

        <button type="button" class="w-100 btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#staticBackdropLive">
          Book Now
        </button>

        <div class="modal fade" id="staticBackdropLive" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLiveLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLiveLabel" style="color:black;">Reservation Complete</h1>
                <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
              </div>
              <div class="modal-body">
                <p style="color:black;">Your reservation is now complete. You will receive your tickets to your email address. (Coming soon!)</p>
              </div>
              <div class="modal-footer">
                <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"></button> -->
                <a href="/home/home?username=<%=user%>">Back Home</button>
              </div>
            </div>
          </div>
        </div>
      
        <footer class="my-5 pt-5 text-muted text-center text-small"></footer>
      </div>

    <script>
        function ticketsChanged() {
            const ticketVal = document.getElementById('tickets').value; 
            document.getElementById('ticket-text').textContent = `${ticketVal} Ticket${ticketVal > 1 ? 's' : ''}, <%=movie.time%>`;
            document.getElementById('ticket-price').textContent = `$${ticketVal * 8}`;
            document.getElementById('total-price').textContent = `$${ticketVal * 8}`;
        }
        ticketsChanged();
    </script>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
</body>

</html>